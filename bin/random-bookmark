#!/usr/bin/env bash
# shellcheck disable=SC2207,SC2001
#
# get & open a random bookmark from vivaldi's bookmarks

path="/c/Users/$(whoami)/AppData/Local/Vivaldi/User Data/Default/Bookmarks"
if [[ $(uname) = "Linux" ]]; then
    path="/mnt$path"
fi

bookmarks=($(grep http "$path" | grep -Ev 'Description|Thumbnail|"name"' | sed 's/\"url\"://'))

b_length=${#bookmarks[@]}
rand_num=$((RANDOM % b_length))
url=$(echo "${bookmarks[$rand_num]}" | sed 's/\"//g')
printf "%d bookmarks\n%s\n" "$b_length" "$url"
explorer.exe "$url"
